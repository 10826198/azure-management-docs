---
title: Logging and auditing
description: Logging and auditing for Azure Arc-enabled servers.
ms.topic: conceptual
ms.date: 06/06/2024
---

# Logging and auditing for Azure Arc-enabled servers

This article describes the logging mechanisms available for Azure Arc-enabled servers, including the Azure Activity log for tracking server actions and unique operation identifiers for filtering. It also covers local logs kept by the Azure Connected Machine agent for troubleshooting purposes, including HIMDS logs, azcmagent CLI logs, extension manager logs, and machine configuration logs, with specific locations detailed for both Windows and Linux systems.

## Azure Activity log

You can use the Azure Activity log to track actions taken on an Azure Arc-enabled server. Actions like installing extensions on an Arc server have unique operation identifiers (all starting with “Microsoft.HybridCompute”) that you can use to filter the log. Learn more about the [Azure Activity Log](/azure/azure-monitor/essentials/activity-log-insights) and how to retain activity logs for more than 30 days by [sending activity log data](/azure/azure-monitor/essentials/activity-log?tabs=powershell) to Log Analytics. 

## Local logs

The Azure Connected Machine agent keeps a set of local logs on each server that may be useful for troubleshooting or auditing when the Arc agent made a change to the system. The fastest way to get a copy of all logs from a server is to run [azcmagent logs](/azure/azure-arc/servers/azcmagent-logs), which will generate a compressed folder of all the latest logs for you.

## HIMDS log

The HIMDS log file contains all log data from the HIMDS service. This includes heartbeat information, connection and disconnection attempts, and a history of REST API requests for IMDS metadata and managed identity tokens from other apps on the system.
OS	Log location
Windows	%PROGRAMDATA%\AzureConnectedMachineAgent\Log\himds.log
Linux	/var/opt/azcmagent/log/himds.log

## azcmagent CLI log

The azcmagent log file contains a history of commands run using the local “azcmagent” command line interface. This log will provide you with the parameters used when connecting, disconnecting, or modifying the configuration of the agent.

|OS  |Log location  |
|---------|---------|
|Windows |%PROGRAMDATA%\AzureConnectedMachineAgent\Log\azcmagent.log |
|Linux |/var/opt/azcmagent/log/azcmagent.log |

## Extension Manager log

The extension manager log contains information about attempts to install, upgrade, reconfigure, and uninstall extensions on the machine.

|OS  |Log location  |
|---------|---------|
|Windows |%PROGRAMDATA%\GuestConfig\ext_mgr_logs\gc_ext.log |
|Linux |/var/lib/GuestConfig/ext_mgr_logs/gc_ext.log |

Additional logs may be generated by individual extensions. Logs for individual extensions are not guaranteed to follow any standard log format.

|OS  |Log location  |
|---------|---------|
|Windows |%PROGRAMDATA%\GuestConfig\extension_logs\* |
|Linux |/var/lib/GuestConfig/extension_logs/* |

## Machine Configuration log

The machine configuration policy engine generates logs for the audit and enforcement of settings on the system.

|OS  |Log location  |
|---------|---------|
|Windows |%PROGRAMDATA%\GuestConfig\arc_policy_logs\gc_agent.log |
|Linux |/var/lib/GuestConfig/arc_policy_logs/gc_agent.log |





